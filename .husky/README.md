# Pre-commit Hook è¯´æ˜

è¿™ä¸ªpre-commit hookæ ¹æ®é¡¹ç›®rulesé…ç½®ï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œè§„èŒƒæ€§ã€‚

## ğŸ” æ£€æŸ¥æµç¨‹

### Step 1: lint-staged æ£€æŸ¥

- **ä»£ç æ ¼å¼åŒ–**: Prettierè‡ªåŠ¨æ ¼å¼åŒ–JS/TS/Vue/JSON/MDæ–‡ä»¶
- **ESLintä¿®å¤**: è‡ªåŠ¨ä¿®å¤å¯ä¿®å¤çš„ä»£ç è§„èŒƒé—®é¢˜
- **æ—¶é—´æˆ³æ£€æŸ¥**: ç¡®ä¿Markdownæ–‡ä»¶åŒ…å«æ­£ç¡®çš„æ—¶é—´æˆ³å¤´éƒ¨

### Step 2: TypeScriptç±»å‹æ£€æŸ¥

- è¿è¡Œ `npm run type-check`
- ç¡®ä¿æ‰€æœ‰TypeScriptä»£ç ç±»å‹æ­£ç¡®

### Step 3: å•å…ƒæµ‹è¯•

- è¿è¡Œ `npm run test:unit`
- å¿«é€ŸéªŒè¯æ ¸å¿ƒåŠŸèƒ½æ­£ç¡®æ€§

### Step 4: æ„å»ºéªŒè¯

- è¿è¡Œ `npm run build`
- ç¡®ä¿ä»£ç å¯ä»¥æ­£å¸¸æ„å»º

## ğŸ“‹ è§„åˆ™ä¾æ®

æ ¹æ®ä»¥ä¸‹é¡¹ç›®è§„åˆ™æ–‡ä»¶é…ç½®ï¼š

- **frontend-development.mdc**: æäº¤å‰å¿…é¡»è¿è¡Œlintå’Œtype-check
- **testing-standards.mdc**: æäº¤å‰éœ€è¦è¿è¡Œæµ‹è¯•å¥—ä»¶å’Œè¦†ç›–ç‡æ£€æŸ¥
- **code-quality-standards.mdc**: æäº¤å‰æ£€æŸ¥æ¸…å•è¦æ±‚
- **development-workflow.mdc**: å¼€å‘æµç¨‹ä¸­çš„æäº¤è§„èŒƒ

## âš¡ æ€§èƒ½ä¼˜åŒ–

ä¸ºäº†æé«˜æäº¤æ•ˆç‡ï¼Œè¿™ä¸ªhookåªè¿è¡Œæœ€å…³é”®çš„æ£€æŸ¥ï¼š

- **å•å…ƒæµ‹è¯•**: è€Œä¸æ˜¯å®Œæ•´æµ‹è¯•å¥—ä»¶ï¼ˆé›†æˆæµ‹è¯•å’ŒE2Eæµ‹è¯•åœ¨CI/CDä¸­è¿è¡Œï¼‰
- **å¢é‡æ£€æŸ¥**: lint-stagedåªæ£€æŸ¥å˜æ›´çš„æ–‡ä»¶
- **å¹¶è¡Œæ‰§è¡Œ**: æŸäº›æ£€æŸ¥å¯ä»¥å¹¶è¡Œè¿è¡Œ

## ğŸš« ç»•è¿‡Hookï¼ˆä¸æ¨èï¼‰

å¦‚æœç¡®å®éœ€è¦ç»•è¿‡pre-commitæ£€æŸ¥ï¼š

```bash
git commit --no-verify -m "commit message"
```

**æ³¨æ„**: ç»•è¿‡æ£€æŸ¥çš„ä»£ç å¯èƒ½ä¼šåœ¨CI/CDä¸­å¤±è´¥ã€‚

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹æ£€æŸ¥é¡¹ç›®

ç¼–è¾‘ `.husky/pre-commit` æ–‡ä»¶æ¥è°ƒæ•´æ£€æŸ¥æ­¥éª¤ã€‚

### ä¿®æ”¹lint-stagedé…ç½®

åœ¨ `package.json` ä¸­çš„ `lint-staged` éƒ¨åˆ†ä¿®æ”¹æ–‡ä»¶æ£€æŸ¥è§„åˆ™ã€‚

### ä¿®æ”¹æ—¶é—´æˆ³æ£€æŸ¥

æ—¶é—´æˆ³æ£€æŸ¥ç”± `docs/tools/timestamp-helper.js check-timestamp` å‘½ä»¤æ‰§è¡Œã€‚

## ğŸ“ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **TypeScripté”™è¯¯**

   ```bash
   npm run type-check
   ```

2. **ESLinté”™è¯¯**

   ```bash
   npm run lint:fix
   ```

3. **æµ‹è¯•å¤±è´¥**

   ```bash
   npm run test:unit --verbose
   ```

4. **æ„å»ºå¤±è´¥**

   ```bash
   npm run build
   ```

5. **æ—¶é—´æˆ³ç¼ºå¤±**
   ```bash
   npm run docs:fix
   ```

### å®Œæ•´æœ¬åœ°æµ‹è¯•

è¦è¿è¡Œå®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼ˆåŒ…æ‹¬CI/CDä¼šè¿è¡Œçš„æ‰€æœ‰æµ‹è¯•ï¼‰ï¼š

```bash
npm run test:run           # æ‰€æœ‰æµ‹è¯•
npm run test:coverage      # è¦†ç›–ç‡æŠ¥å‘Š
npm run test:e2e          # ç«¯åˆ°ç«¯æµ‹è¯•
npm run test:playwright   # Playwrightæµ‹è¯•
npm run test:puppeteer    # Puppeteeræµ‹è¯•
```

## ğŸ“ˆ æŒç»­æ”¹è¿›

è¿™ä¸ªpre-commité…ç½®ä¼šæ ¹æ®é¡¹ç›®éœ€æ±‚å’Œå›¢é˜Ÿåé¦ˆæŒç»­ä¼˜åŒ–ï¼š

- å¹³è¡¡æ£€æŸ¥å®Œæ•´æ€§å’Œæäº¤æ•ˆç‡
- æ ¹æ®é¡¹ç›®å‘å±•è°ƒæ•´æ£€æŸ¥é¡¹ç›®
- ä¼˜åŒ–æ£€æŸ¥æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ

---

**é…ç½®ç‰ˆæœ¬**: v2.1.1
**æœ€åæ›´æ–°**: T275.1
**ç»´æŠ¤**: æ ¹æ®project rulesè‡ªåŠ¨é…ç½®
